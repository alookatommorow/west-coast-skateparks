<script src="https://apis.google.com/js/api:client.js"></script>
<%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

<% if skatepark && skatepark.has_coordinates? %>
  <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV.fetch('GOOGLE_KEY') %>" async defer data-turbolinks-eval="false"></script>
<% elsif @user && params[:action] == "show" %>
  <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV.fetch('GOOGLE_KEY') %>&callback=initMap" async defer data-turbolinks-eval="false"></script>
<% end %>

<% if Rails.env.test? %>
  <%= javascript_tag do %>
    $.fx.off = true;
    $.ajaxSetup({ async: false });
  <% end %>
<% end %>
